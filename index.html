<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ëŸ­í‚¤íƒœ ì´ë²¤íŠ¸</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 50px; }
        #container { max-width: 400px; margin: auto; }
        #roulette { font-size: 2em; height: 50px; margin: 20px 0; display: none; }
        #phoneInput, #startBtn, #pickBtn { font-size: 1em; padding: 10px; margin: 5px; }
        #result { font-size: 1.5em; margin-top: 20px; font-weight: bold; }
        .main_title { font-size: 1.5em; }
        .main_img {width: 70%; height: auto;}
        .info01 { color: red; font-size: 0.8em; margin-top: 0px; }
    </style>
</head>
<body>
    <div id="container">
        <h1 class="main_title">ìƒˆí•´ë§ì´ ëŸ­í‚¤íƒœ ì´ë²¤íŠ¸</h1>
        <img class="main_img" src="pythonProject/src/ëŸ­í‚¤íƒœì´ë²¤íŠ¸.png">
        <p id="phonePrompt">ì „í™”ë²ˆí˜¸ ì „ì²´ë¥¼ ì…ë ¥í•˜ì„¸ìš”:</p>
        <p class="info01"> ì¤‘ë³µ ì°¸ì—¬ ì œí•œì„ ìœ„í•œ ìš©ë„ë¡œë§Œ í™œìš©ë©ë‹ˆë‹¤. </p>
        <input type="text" id="phoneInput" maxlength="11" placeholder="ì „í™”ë²ˆí˜¸ ì…ë ¥ (- ì—†ì´)">
        <button id="startBtn">ì…ë ¥</button>

        <div id="game" style="display:none;">
            <p>ë‹¨ì–´ ë£°ë ›ì´ ëŒì•„ê°‘ë‹ˆë‹¤!</p>
            <div id="roulette">ëŸ­í‚¤íƒœ</div>
            <button id="pickBtn">ë½‘ê¸°</button>
            <div id="result"></div>
        </div>
    </div>

    <script>
        let words = [];
        const specialWords = { "í™©ê¸ˆ ëŸ­í‚¤íƒœ": 0.01, "ëŸ­í‚¤íƒœ": 0.10, "ë¶€ìíƒœ": 0.10, "ì¥ìˆ˜íƒœ": 0.10 };
        let rouletteInterval;
        let rouletteSpeed = 50;
        let userPhone;
        let isRouletteRunning = true;

        fetch('words.txt')
            .then(response => response.text())
            .then(text => {
                words = text.split(', ');
            });

        document.getElementById("startBtn").addEventListener("click", function() {
            userPhone = document.getElementById("phoneInput").value;
            if (userPhone.length === 11) {
                if (localStorage.getItem(`participation_${userPhone}`)) {
                    alert("ì´ë¯¸ ì°¸ì—¬í•œ ë²ˆí˜¸ì…ë‹ˆë‹¤. ë‹¤ì‹œ ì°¸ì—¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                } else {
                    localStorage.setItem(`participation_${userPhone}`, "true");
                    document.getElementById("phonePrompt").style.display = "none";
                    document.getElementById("phoneInput").style.display = "none";
                    document.getElementById("startBtn").style.display = "none";

                    document.getElementById("game").style.display = "block";
                    document.getElementById("roulette").style.display = "block";
                    startRoulette();
                }
            } else {
                alert("ì „í™”ë²ˆí˜¸ ì „ì²´ë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
            }
        });

        document.getElementById("pickBtn").addEventListener("click", function() {
            if (!isRouletteRunning) return;
            isRouletteRunning = false;
            clearInterval(rouletteInterval);
            let selectedWord = getRandomWord();
            document.getElementById("roulette").innerText = selectedWord;

            if (specialWords[selectedWord]) {
                document.getElementById("result").innerText = `ì¶•í•˜í•©ë‹ˆë‹¤! ${selectedWord} ë‹¹ì²¨! ğŸ‰`;
            } else {
                document.getElementById("result").innerText = "ì•„ì‰½ì§€ë§Œ ê½! ë‹¤ìŒ ê¸°íšŒì—!";
            }
        });

        function startRoulette() {
            rouletteInterval = setInterval(() => {
                document.getElementById("roulette").innerText = words[Math.floor(Math.random() * words.length)];
            }, rouletteSpeed);
        }

        function getRandomWord() {
            let rand = Math.random();
            let cumulativeProbability = 0;
            for (let word in specialWords) {
                cumulativeProbability += specialWords[word];
                if (rand < cumulativeProbability) return word;
            }
            return words[Math.floor(Math.random() * words.length)];
        }
    </script>
</body>
</html>
